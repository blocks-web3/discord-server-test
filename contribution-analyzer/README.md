## 目次  <!-- omit in toc -->
- [1. Setup](#1-setup)
- [2. Usage](#2-usage)
- [3. フォルダ構成](#3-フォルダ構成)
- [4. Discordサーバの貢献度の評価観点に関して](#4-discordサーバの貢献度の評価観点に関して)
  - [4.1. メッセージ投稿数/リアクション数](#41-メッセージ投稿数リアクション数)
  - [4.2. 有益度](#42-有益度)
  - [4.3. 参加度](#43-参加度)
  - [4.4. 支援度](#44-支援度)
  - [4.5. 違反度](#45-違反度)
- [5. 貢献度の評価結果](#5-貢献度の評価結果)


## 1. Setup
```
pyenv install 3.11.3
pyenv local 3.11.3
poetry env use python
poetry shell
poetry install
```

## 2. Usage
```
# https://platform.openai.com/account/api-keys から APIキーを取得
export OPENAI_API_KEY=${API KEY}
PYTHONPATH=./ python analyze.py
```

## 3. フォルダ構成
- [app](app)
  - 貢献度算出用のプログラムを配置。
- [data](data)
  - 貢献度算出対象のデータを配置。Discordから取得した会話データを配置する。
  - 各Discordサーバのデータ管理ポリシーに関わるためgithubにはアップロードしない。
- [doc](doc)
  - 貢献度算出に関連する仕様を配置。
- [report](report)
  - 分析レポートを配置。ChatGPTを使った貢献度算出における精度を記載。
- [result](result):
  - 貢献度算出結果を配置。
  - 各Discordサーバのデータ管理ポリシーに関わるためgithubにはアップロードしない。
- [scripts](scripts)
  - 主にappフォルダのプログラムを利用するためのツールを配置。
- [tests](tests)
  - テストコードを配置。
- root
  - READMEや環境構築に必要なファイル群を配置。

## 4. Discordサーバの貢献度の評価観点に関して
以下の評価指標に基づいてスコアを算出し、任意の係数で重み付けした合計を貢献度とする。

### 4.1. メッセージ投稿数/リアクション数
- 概要
  - サーバ内での発言数が多いユーザは、一般的には活発にコミュニケーションを行っていると考えられる。ただし、発言の内容も重要なので単に発言回数だけでなく後述の評価観点と組み合わせて貢献度を評価する。
- 評価指標
  - メッセージ投稿回数、リアクション数

### 4.2. 有益度
- 概要
  - ユーザが投稿したメッセージが他のメンバーからの反応を引き出しているかどうかを評価する。
- 評価指標
  - メッセージに対してのリアクション（絵文字など）数、返信数から算出する。

### 4.3. 参加度
- 概要
  - サーバ内で開催されるイベントやミーティングにどれだけ積極的に参加しているかを評価する。
- 評価指標
  - イベント期間中のステージチャンネル参加回数

### 4.4. 支援度
- 概要
  - ユーザが他のメンバーの質問に答えたり、新規メンバーを歓迎したり、問題が発生したときに解決を助けたりといった行動をとった場合に評価する。
- 評価指標
  - 他のメンバーの困り事を解決した回数（ChatGPTでQAの会話から困り事を解決したメッセージを抽出する）

### 4.5. 違反度
- 概要
  - ユーザがサーバのルールを遵守していて、他のユーザを尊重し、健全なコミュニケーションを促進しているかどうかを評価する。
  - 違反度が高いとネガティブ評価となる。
- 評価指標
  - 悪意（暴力・差別・アダルトなど）のある表現を使った回数（ChatGPTで悪意のある表現を抽出する）

## 5. 貢献度の評価結果
- 当該システムで分析した結果は以下のフォーマットでファイル出力を行う。
  - ランキング
    - ファイル名：```ranking_${rankingId}.json```
    - カラム名：[データ構造](doc/データ構造.md)のランキング 参照
  - ランキングユーザ詳細
    - ファイル名：```user_${userId}_${rankingId}.json```
    - カラム名：[データ構造](doc/データ構造.md)のランキングユーザ詳細 参照


